<script>
    //Pomise 방식으로 콜백 지옥 벗어나기
    // Promise 객체를 만드는 - 제작 코드
    function incrementNum(n,ms){
        return new Promise((resolve,reject) => {
        console.log(n);
        // 조건 num <= 5 이면 성공 5초과면 실패
        setTimeout(() =>{
            const num= n+1;
            if(num>5){
                const err = Error()
                err.name = "num의 값이 5를 초과함"
                reject(err)
            }
            callback(num);
        },ms);
        })
    }

    async function incrementNum(){
        const stop1 = await incrementNum(1,1000);
        const stop2 = await incrementNum(step1,2000);
        const stop3 = await incrementNum(stop2,500);
        const stop4 = await incrementNum(stop3,200);
        const stop5 = await incrementNum(stop4,4000);
        const stop6 = await incrementNum(stop5,2400);
        const stop7 = await incrementNum(stop6,2000);

    }
    incrementNum()
    .then(console.log)
    .catch(console.log);

    //Promise 객체를 사용하는 소비코드
    incrementNum(1)
     .then(n => incrementNum(n))
     .then(n => incrementNum(n))
     .then(n => incrementNum(n))
     .then(n => incrementNum(n))
     .then(n => incrementNum(n))
     .then(n => incrementNum(n))
     .then(n => incrementNum(n));
</script>